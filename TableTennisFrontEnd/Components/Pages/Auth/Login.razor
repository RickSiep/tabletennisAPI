@page "/login"
@using TableTennisFrontEnd.Components.Pages.Auth

<PageTitle>Home</PageTitle>

<header class="fullscreen-header bg-primary h-100 d-flex">
    <div class="row g-0 justify-content-center align-items-center background-image--crystal_tower w-100 vh-100">
        <div class="col-md-5 text-center mx-2 background-gradient--purple_reversed rounded d-flex flex-column">
            @if (_spinner)
            {
                <div class="position-absolute top-50 start-50 translate-middle bg-black bg-opacity-50 w-100 h-100 d-flex justify-content-center align-items-center">
                    <div class="spinner-border" role="status"></div>
                </div>
            }

            @if (LoginOrRegister)
            {
                <div class="my-2 mx-5 py-5">
                    <h2>Login</h2>
                    <LoginForm SpinnerChanged="SetSpinnerVisible" />
                </div>
                <button class="btn btn-primary bg-dark align-self-end m-2" @onclick="ToggleAuthentication">No account yet? Register here</button>
            }
            else
            {
                <div class="my-2 mx-5 py-5">
                    <h2>Register</h2>
                    <RegisterForm SpinnerChanged="SetSpinnerVisible" />
                </div>
                <button class="btn btn-primary bg-dark align-self-end m-2" @onclick="ToggleAuthentication">Login instead?</button>
            }
        </div>
    </div>
</header>

@code {
    private bool _spinner = false;
    public bool LoginOrRegister { get; set; } = true;

    private Task SetSpinnerVisible(bool isVisible)
    {
        _spinner = isVisible;
        return Task.CompletedTask;
    }

    private void ToggleAuthentication() => LoginOrRegister = !LoginOrRegister;
}